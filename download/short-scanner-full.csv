Этап;Подэтап;Задача;Описание;Тип;Условие;Следующий шаг

"Запуск";"";"";"Начало процесса сканирования";"Start Event";"";"Этап 1: Инициализация"

"Этап 1: Инициализация";"Параметры";"Получить параметры запроса";"exchange, minChange, sortBy, language";"Task";"";"Инициализировать фильтры"
"Этап 1: Инициализация";"Параметры";"Инициализировать фильтры";"minConfidence, minPriceChange, onlyRsiDivergence, hideFakePump";"Task";"";"Получить API биржи"
"Этап 1: Инициализация";"Параметры";"Получить API биржи";"Bybit или Binance";"Task";"";"Этап 2: Получение данных"

"Этап 2: Получение данных";"Gainers";"Запросить Top Gainers";"Топ-30 монет с ростом";"Task";"";"Проверка: Gainers найдены?"
"Этап 2: Получение данных";"Gainers";"Проверка: Gainers найдены?";"Есть ли данные для анализа";"Exclusive Gateway";"gainers.length > 0";"Этап 3: Анализ тикеров"
"Этап 2: Получение данных";"Gainers";"Нет данных";"Возврат пустого результата";"End Event";"gainers.length == 0";"Конец"

"Этап 3: Анализ тикеров";"Загрузка данных";"Свечи 5m (100)";"Тайминг входа - 10% вес";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Свечи 15m (200)";"Краткосрочный тренд - 10% вес";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Свечи 1h (300)";"Основной анализ - 20% вес";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Свечи 2h (200)";"Мост тренда - 30% вес";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Свечи 4h (300)";"Структура тренда - 40% вес";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Funding Rate + история";"Текущий + 8 периодов";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Open Interest";"Текущий + изменение 24h";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Long/Short Ratio";"Соотношение позиций";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Top Traders Ratio";"Соотношение топ-трейдеров";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Order Book";"Биды/аски, стены заявок";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Liquidation Heatmap";"Уровни ликвидаций";"Task";"Параллельно";"Синхронизация"
"Этап 3: Анализ тикеров";"Загрузка данных";"Синхронизация";"Ожидание всех данных";"Parallel Gateway";"";"Проверка: Достаточно свечей?"
"Этап 3: Анализ тикеров";"Загрузка данных";"Проверка: Достаточно свечей?";"Минимум 100 свечей";"Exclusive Gateway";"≥ 100 свечей";"Подсистема: Индикаторы"
"Этап 3: Анализ тикеров";"Загрузка данных";"Пропустить тикер";"Недостаточно данных";"End Event";"< 100 свечей";"Следующий тикер"

"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"RSI (14)";"Значение + дивергенция";"Task";"";"MACD"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"MACD";"Значение + кроссовер + дивергенция";"Task";"";"EMA"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"EMA (9, 21, 50, 200)";"Тренд + кроссовер + расстояние до EMA200";"Task";"";"Bollinger Bands"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"Bollinger Bands";"Позиция + сигнал";"Task";"";"VWAP"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"VWAP";"Значение + отклонение + сигнал";"Task";"";"ATR"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"ATR";"Волатильность в %";"Task";"";"ADX"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"ADX";"Сила тренда";"Task";"";"Multi-TF Alignment"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"Multi-TF Alignment";"Взвешивание 5 TF: 5m=10%, 15m=10%, 1h=20%, 2h=30%, 4h=40%";"Task";"";"Детекция паттернов"
"Этап 3: Анализ тикеров";"Подсистема: Индикаторы";"Детекция паттернов";"Fake Pump, Структура тренда";"Task";"";"Подсистема: TIER"

"Этап 3: Анализ тикеров";"Подсистема: TIER";"Расчёт метрик волатильности";"ATR 24h/7d/14d, Volume Ratio";"Task";"";"Проверка: В Override списке?"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Проверка: В Override списке?";"PEPE, WIF, BONK... = TIER 3";"Exclusive Gateway";"В списке";"Получить TIER из списка"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Получить TIER из списка";"Override TIER";"Task";"В списке";"Проверка: Volume adjustment?"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Base TIER (ATR 14d)";"< 5% → T1, 5-12% → T2, > 12% → T3";"Task";"Не в списке";"Current TIER"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Current TIER (ATR 24h)";"< 4% → T1, 4-10% → T2, > 10% → T3";"Task";"";"Price Change TIER"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Price Change TIER";"< 10% → T1, 10-25% → T2, > 25% → T3";"Task";"";"Комбинировать TIER"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Комбинировать TIER";"Взвешенная формула: Base×0.5 + Current×0.3 + PriceChange×0.2";"Task";"";"Проверка: Volume adjustment?"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Проверка: Volume adjustment?";"Корректировка по объёму";"Exclusive Gateway";"vol > 3x OR vol < 0.3x";"Корректировка по Volume"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Корректировка по Volume";"spike > 3x + low ATR → min T2; extreme > 5x → min T2; low < 0.3x → conf -15%";"Task";"Да";"Проверка: Новая монета?"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Проверка: Новая монета?";"Меньше 50 свечей";"Exclusive Gateway";"< 50 свечей";"Флаг isNewCoin"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Флаг isNewCoin";"confidence -= 20%";"Task";"Да";"Получить конфиг TIER"
"Этап 3: Анализ тикеров";"Подсистема: TIER";"Получить конфиг TIER";"TIER_1/2/3_CONFIG - пороги для score";"Task";"";"Подсистема: SHORT Score"

"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Price Change";"По порогам TIER конфига";"Task";"";"Score: RSI"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: RSI";"Значение + дивергенция";"Task";"";"Score: Bollinger Bands"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Bollinger Bands";"Позиция относительно полос";"Task";"";"Score: VWAP"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: VWAP";"Отклонение от средней";"Task";"";"Score: Funding Rate"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Funding Rate";"Значение + тренд";"Task";"";"Score: Long/Short Ratio"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Long/Short Ratio";"Соотношение позиций";"Task";"";"Score: Top Traders"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Top Traders";"Позиции топ-трейдеров";"Task";"";"Score: Multi-TF"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Multi-TF Alignment";"Выравнивание трендов";"Task";"";"Score: Open Interest"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Open Interest";"Изменение OI vs цена";"Task";"";"Score: Order Flow"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Score: Order Flow";"Дисбаланс + ликвидации";"Task";"";"Суммировать Score"
"Этап 3: Анализ тикеров";"Подсистема: SHORT Score";"Суммировать Score";"Итого: 0-100";"Task";"";"Подсистема: Определение Setup"

"Этап 3: Анализ тикеров";"Подсистема: Setup";"OI Divergence";"Цена ↑, OI ↓ = разворот";"Task";"Приоритет 10";"RSI/MACD Divergence"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"RSI/MACD Divergence";"Медвежья дивергенция";"Task";"Приоритет 7-10";"Fake Pump"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Fake Pump";"Памп без объёма";"Task";"Приоритет 5-9";"Structure Break"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Structure Break";"Слом тренда";"Task";"Приоритет 6-8";"Double Top"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Double Top";"Двойная вершина";"Task";"Приоритет 6-8";"Resistance Rejection"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Resistance Rejection";"Отказ от сопротивления";"Task";"Приоритет 5-7";"Rejection (BB+RSI)"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Rejection (BB+RSI)";"Отскок от полосы + перекупленность";"Task";"Приоритет 6-8";"EMA Breakout"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"EMA Breakout";"Медвежий кроссовер";"Task";"Приоритет 6";"Выбрать лучший"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Выбрать лучший по приоритету";"Максимальный приоритет";"Task";"";"Проверка: Сильный сетап?"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Проверка: Сильный сетап?";"Есть ли найденный паттерн";"Exclusive Gateway";"Есть сетап";"Рассчитать уверенность"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Mean Reversion";"По умолчанию";"Task";"Нет сильного";"Рассчитать уверенность"
"Этап 3: Анализ тикеров";"Подсистема: Setup";"Рассчитать уверенность";"0-100%";"Task";"";"Подсистема: Торговые уровни"

"Этап 3: Анализ тикеров";"Подсистема: Уровни";"Entry Zone";"Зависит от типа сетапа: Divergence→EMA21, FakePump→текущая, Structure→ретест";"Task";"";"Stop Loss"
"Этап 3: Анализ тикеров";"Подсистема: Уровни";"Stop Loss";"Минимум 2 ATR, за ключевым сопротивлением (High24h, BB Upper, VWAP)";"Task";"";"Take Profit 1"
"Этап 3: Анализ тикеров";"Подсистема: Уровни";"Take Profit 1";"2R или структура (BB Middle, EMA50, Low24h)";"Task";"";"Take Profit 2"
"Этап 3: Анализ тикеров";"Подсистема: Уровни";"Take Profit 2";"3R или структура (BB Lower)";"Task";"";"Risk/Reward Ratio"
"Этап 3: Анализ тикеров";"Подсистема: Уровни";"Risk/Reward Ratio";"Reward / Risk";"Task";"";"Breakeven уровни"
"Этап 3: Анализ тикеров";"Подсистема: Уровни";"Breakeven уровни";"Триггер и уровень перевода в безубыток";"Task";"";"Генерация текстов"

"Этап 3: Анализ тикеров";"Генерация";"Предупреждения";"Экстремальное движение, высокий фандинг, против тренда и т.д.";"Task";"";"Обоснование"
"Этап 3: Анализ тикеров";"Генерация";"Обоснование";"Почему этот сетап";"Task";"";"Анализ"
"Этап 3: Анализ тикеров";"Генерация";"Анализ";"Полный текст анализа";"Task";"";"Рекомендация"
"Этап 3: Анализ тикеров";"Генерация";"Рекомендация";"enter (score≥50, RSI≥65) / wait (score≥30) / skip";"Task";"";"Добавить кандидата"
"Этап 3: Анализ тикеров";"Генерация";"Добавить кандидата";"В список результатов";"Task";"";"Логировать"
"Этап 3: Анализ тикеров";"Генерация";"Логировать результат";"[OK] symbol: tier=X, score=Y, pattern=Z";"Task";"";"Следующий тикер или Этап 4"

"Этап 4: Фильтрация";"Фильтры";"Применить фильтры";"minConfidence, minPriceChange, onlyRsiDivergence, hideFakePump";"Task";"";"Сортировка"
"Этап 4: Фильтрация";"Фильтры";"Сортировать кандидатов";"По confidence/score/priceChange/RSI/volume";"Task";"";"Этап 5: Результат"

"Этап 5: Результат";"Ответ";"Сформировать JSON ответ";"success, message, timestamp, candidates[]";"Task";"";"Логировать итоги"
"Этап 5: Результат";"Ответ";"Логировать итоги";"[SUMMARY] Total candidates: N";"Task";"";"Конец"

"Конец";"";"";"Возврат кандидатов клиенту";"End Event";"";""
